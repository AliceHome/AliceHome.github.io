<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.2" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.2" />






<meta name="description" content="The Loneliest Whale in the World">
<meta property="og:type" content="website">
<meta property="og:title" content="Hi, this is Alice Home">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="Hi, this is Alice Home">
<meta property="og:description" content="The Loneliest Whale in the World">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hi, this is Alice Home">
<meta name="twitter:description" content="The Loneliest Whale in the World">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post","offset":12,"offset_float":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/page/2/"/>





  <title>Hi, this is Alice Home</title>
  














</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

<a href="https://github.com/AliceHome" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px)
{.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Hi, this is Alice Home</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br />
            
            公益404
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/29/current/June/Swift/Swift-二-swift-中的原型模式/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/29/current/June/Swift/Swift-二-swift-中的原型模式/" itemprop="url">Swift (二) swift 中的原型模式</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-29T10:09:22+08:00">
                2018-07-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/AliceHome/SwiftTips" target="_blank" rel="noopener">代码链接</a></p>
<h2 id="继承自-NSObject-类"><a href="#继承自-NSObject-类" class="headerlink" title="继承自 NSObject 类"></a>继承自 NSObject 类</h2><p><img src="/2018/07/29/current/June/Swift/Swift-二-swift-中的原型模式/error.png" alt=""> </p>
<p>可以看到直接调用 copy 方法是可以的，但是程序会报错，这是以为 copy 是 NSObject 的方法，但是 NSObject 类并没有实现 NSCopying 协议，所以：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">class Person: NSObject, NSCopying &#123;</span><br><span class="line"></span><br><span class="line">    var name: String?</span><br><span class="line">    func copy(with zone: NSZone? = nil) -&gt; Any &#123;</span><br><span class="line">        let newP = Person()</span><br><span class="line">        newP.name = name</span><br><span class="line">        return newP</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">let p = Person()</span><br><span class="line">let p2 = p.copy() as! Person</span><br><span class="line">if let name = p2.name  &#123;</span><br><span class="line">   print(name)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="非继承自-NSObject"><a href="#非继承自-NSObject" class="headerlink" title="非继承自 NSObject"></a>非继承自 NSObject</h2><p><img src="/2018/07/29/current/June/Swift/Swift-二-swift-中的原型模式/Dog.png" alt=""> </p>
<p>而向 Dog 却并没有继承自 NSObject，所以程序运行的时候回报出没有 copy 成员的错误</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span>: <span class="title">NSCopying</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">var</span> ower: <span class="type">Person</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> copyDog = <span class="type">Dog</span>()</span><br><span class="line">        copyDog.name = name</span><br><span class="line">        copyDog.ower = ower</span><br><span class="line">        <span class="keyword">return</span> copyDog</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> dog = <span class="type">Dog</span>()</span><br><span class="line">dog.name = <span class="string">"Tom"</span></span><br><span class="line"><span class="keyword">let</span> newDog = dog.copy() <span class="keyword">as</span>! <span class="type">Dog</span></span><br><span class="line">dog.name</span><br></pre></td></tr></table></figure>
<h2 id="继承类实现原型模式"><a href="#继承类实现原型模式" class="headerlink" title="继承类实现原型模式"></a>继承类实现原型模式</h2><p><img src="/2018/07/29/current/June/Swift/Swift-二-swift-中的原型模式/tianyuan.png" alt=""> </p>
<p>这里出现了一个问题，就是 TianYuanDog 类型转换不成功，这是因为在 Dog 的 copy(with zone:) 方法中，我们是生成的 Dog 类，所以这里需要做一下修改</p>
<p>修改前：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> copyDog = <span class="type">Dog</span>()</span><br><span class="line">      copyDog.name = name</span><br><span class="line">      copyDog.ower = ower</span><br><span class="line">      <span class="keyword">return</span> copyDog</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>
<p><code>let copyDog = Dog()</code> 这里不能直接生成 Dog 对象，否则子类继承的话会出现问题</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line"><span class="comment">//        let copyDog = Dog()</span></span><br><span class="line">        <span class="keyword">let</span> <span class="keyword">dynamicType</span> = type(of: <span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">let</span> copyDog = <span class="keyword">dynamicType</span>.<span class="keyword">init</span>()</span><br><span class="line">        copyDog.name = name</span><br><span class="line">        copyDog.ower = ower</span><br><span class="line">        <span class="keyword">return</span> copyDog</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>同样的，上面 Person 也要做修改：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span>: <span class="title">NSObject</span>, <span class="title">NSCopying</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span>?</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line"><span class="comment">//        let newP = Person()</span></span><br><span class="line">        <span class="keyword">let</span> personType = type(of: <span class="keyword">self</span>)</span><br><span class="line">        <span class="keyword">let</span> newP = personType.<span class="keyword">init</span>()</span><br><span class="line">        </span><br><span class="line">        newP.name = name</span><br><span class="line">        <span class="keyword">return</span> newP</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><img src="/2018/07/29/current/June/Swift/Swift-二-swift-中的原型模式/tianyuanr.png" alt=""> </p>
<h2 id="继承类实现原型模式-并添加新的属性"><a href="#继承类实现原型模式-并添加新的属性" class="headerlink" title="继承类实现原型模式, 并添加新的属性"></a>继承类实现原型模式, 并添加新的属性</h2><p>接下来 TianYuanDog 类 需要添加一个 ID 号，这个 ID 号在实例执行 copy 的时候也需要跟随一起 copy 的</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TianYuanDog</span>: <span class="title">Dog</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> idNumber: <span class="type">Int</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>() &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(number idNumber: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.idNumber = idNumber</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone?)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> newCopy =  <span class="keyword">super</span>.copy(with: zone) <span class="keyword">as</span>! <span class="type">TianYuanDog</span></span><br><span class="line">        newCopy.idNumber = <span class="keyword">self</span>.idNumber</span><br><span class="line">        <span class="keyword">return</span> newCopy</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> tianyuan = <span class="type">TianYuanDog</span>(number:<span class="number">123</span>)</span><br><span class="line">tianyuan.name = <span class="string">"中华田园犬"</span></span><br><span class="line"><span class="keyword">let</span> newCopy = tianyuan.copy(with: <span class="literal">nil</span>) <span class="keyword">as</span>! <span class="type">TianYuanDog</span></span><br><span class="line">newCopy.name</span><br><span class="line">newCopy.idNumber</span><br></pre></td></tr></table></figure>
<p>具体操作：</p>
<ol>
<li>重写 copy(with:) 方法</li>
<li>如果需要添加 init() 方法，需要重写 require 的 init 方法</li>
</ol>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/27/current/June/设计模式-一-6-个原则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/27/current/June/设计模式-一-6-个原则/" itemprop="url">设计模式(一) 6 个原则</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-27T14:38:45+08:00">
                2018-07-27
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Design-Pattern/" itemprop="url" rel="index">
                    <span itemprop="name">Design Pattern</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="总原则：开闭原则"><a href="#总原则：开闭原则" class="headerlink" title="总原则：开闭原则"></a>总原则：开闭原则</h2><p><strong>对扩展开放，对修改关闭</strong></p>
<h2 id="单一原则"><a href="#单一原则" class="headerlink" title="单一原则"></a>单一原则</h2><p>不存在多于一个导致类变更的原因，也就是说每个类应该实现单一的职责，如果不能，就应该把类进一步拆分</p>
<h2 id="里氏替换原则"><a href="#里氏替换原则" class="headerlink" title="里氏替换原则"></a>里氏替换原则</h2><p>任何基类出现的地方，子类一定可以出现。 LSP 是继承复用的基石，只有当衍生类可以替换掉基类，软件单位功能不受到影响，基类才能真正被复用，而衍生类才能在基类的基础上增加新的行为。</p>
<h2 id="依赖倒转原则"><a href="#依赖倒转原则" class="headerlink" title="依赖倒转原则"></a>依赖倒转原则</h2><p>这个是开闭原则的基础，具体内容：面向接口编程，依赖于抽象而不依赖于具体。写代码时用到具体类时，不与具体类交互，而与具体类的上层接口交互。</p>
<h2 id="接口隔离原则"><a href="#接口隔离原则" class="headerlink" title="接口隔离原则"></a>接口隔离原则</h2><p>每个接口中不存在子类用不到却必须实现的方法，如果不然，就要将接口拆分。使用多个接口的隔离，比使用单个接口要好。</p>
<h2 id="迪米特法则"><a href="#迪米特法则" class="headerlink" title="迪米特法则"></a>迪米特法则</h2><p>一个类对自己依赖的类知道的越少越好，也就是说无论被依赖的类多么复杂，都应该讲逻辑封装在方法内部，通过 public 方法提供给外部，这样当被依赖的类发生变化的时候，才能最小的影响该类。</p>
<h2 id="合成复用原则"><a href="#合成复用原则" class="headerlink" title="合成复用原则"></a>合成复用原则</h2><p>原则尽量首先使用合成/聚合的方法，而不是继承</p>
<h2 id="23-三种设计模式分类："><a href="#23-三种设计模式分类：" class="headerlink" title="23 三种设计模式分类："></a>23 三种设计模式分类：</h2><h3 id="对象创建模式："><a href="#对象创建模式：" class="headerlink" title="对象创建模式："></a>对象创建模式：</h3><ol>
<li>原型模式</li>
<li>工厂模式</li>
<li>抽象工厂模式</li>
<li>生成器模式</li>
<li>单例模式</li>
</ol>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="https://www.cnblogs.com/geek6/p/3951677.html" target="_blank" rel="noopener">23种设计模式全解析</a></li>
</ol>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/26/current/June/Data Structure/Data-Structure-一-Linked-List/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/26/current/June/Data Structure/Data-Structure-一-Linked-List/" itemprop="url">Data Structure(一) Linked List</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-26T23:33:37+08:00">
                2018-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Data-Structure/" itemprop="url" rel="index">
                    <span itemprop="name">Data Structure</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><a href="https://github.com/AliceHome/Data-Structure" target="_blank" rel="noopener">代码地址</a></p>
<h2 id="链表"><a href="#链表" class="headerlink" title="链表"></a>链表</h2><p>链表是数据结构中经常会用到的一种数据结构，是指一串数据项，每一个数据项称之为节点（Node）。</p>
<p><strong>链表主要有两种：</strong></p>
<p><em>单链表</em>，链表中的每个节点只有向后的索引</p>
<p><img src="/2018/07/26/current/June/Data Structure/Data-Structure-一-Linked-List/singleLinkedList.png" alt=""></p>
<p><em>双链表</em>，链表除了向后的索引之外，还有指向前一个的索引</p>
<p><img src="/2018/07/26/current/June/Data Structure/Data-Structure-一-Linked-List/doubleLinkedList.png" alt=""></p>
<h2 id="定义节点"><a href="#定义节点" class="headerlink" title="定义节点"></a>定义节点</h2><p>链表是有节点组成的，首先定义节点的数据结构： Node</p>
<ol>
<li>首先将节点定义为一个类 - Node</li>
<li>添加值，并添加一个初始化方法</li>
<li>要有一个指针 next 指向下一个节点，注意这个指针必须是可选类型，因为链表最后的一个 Node 的 next 指针不指向任何 Node</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> val: <span class="type">Int</span></span><br><span class="line">    <span class="keyword">var</span> next: <span class="type">Node</span>?</span><br><span class="line">    <span class="keyword">init</span>(<span class="number">_</span> val: <span class="type">Int</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.val = val</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>如果是双向链表，还需要定义 previous 指针：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class Node &#123;</span><br><span class="line">    </span><br><span class="line">    var value: Int</span><br><span class="line">    var next: Node?</span><br><span class="line">    weak var previous: Node?</span><br><span class="line">    </span><br><span class="line">    public init(_ value: Int) &#123;</span><br><span class="line">        self.value = value</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这里 previous 使用 weak 是为了防止循环引用</p>
<h2 id="定义链表"><a href="#定义链表" class="headerlink" title="定义链表"></a>定义链表</h2><p>定义链表，有两个节点 head  和 tail</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//链表</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LinkedList</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">fileprivate</span> <span class="keyword">var</span> head: <span class="type">Node</span>?</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> tail: <span class="type">Node</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> first: <span class="type">Node</span>? &#123;</span><br><span class="line">        <span class="keyword">return</span> head</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> last: <span class="type">Node</span>? &#123;</span><br><span class="line">        <span class="keyword">return</span> tail</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="空链表"><a href="#空链表" class="headerlink" title="空链表"></a>空链表</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">var</span> isEmpty: <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> head == <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>添加测试代码：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试</span></span><br><span class="line">testList()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testLinkedList</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> link = <span class="type">LinkedList</span>()</span><br><span class="line">    <span class="built_in">assert</span>(link.isEmpty, <span class="string">"空链表"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testLinkedList()</span><br></pre></td></tr></table></figure>
<h2 id="添加节点"><a href="#添加节点" class="headerlink" title="添加节点"></a>添加节点</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">append</span><span class="params">(<span class="number">_</span> value: Int)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> newNode = <span class="type">Node</span>(value)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> tailNode = tail &#123;</span><br><span class="line">        newNode.previous = tailNode</span><br><span class="line">        tailNode.next = newNode</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        head = newNode</span><br><span class="line">    &#125;</span><br><span class="line">    tail = newNode</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ul>
<li>首先根据传入的 value， 创建一个新的节点</li>
<li>如果 tail 不为 nil，就说明当前的链表内有内容，所以执行插入操作</li>
<li>插入操作：newNode 的 previous 指向 tail，tail 的 next 指针指向 newNode，并且设置 newNode 为新的 tail</li>
<li>如果 tail 为 nil， 就说明当前链表为空链表，直接设置 head 为 newNode 就可以了，然后设置 tail 为 newNode</li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//测试</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testLinkedListAppend</span><span class="params">()</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> link = <span class="type">LinkedList</span>()</span><br><span class="line">    link.append(<span class="number">10</span>)</span><br><span class="line">    <span class="built_in">assert</span>(!link.isEmpty, <span class="string">"非空链表"</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">assert</span>(link.first?.value == <span class="number">10</span>, <span class="string">"head 节点为 10"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.last?.value == <span class="number">10</span>, <span class="string">"tail 节点为 10"</span>)</span><br><span class="line">    link.append(<span class="number">20</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.last?.value == <span class="number">20</span>, <span class="string">"tail 节点为 20"</span>)</span><br><span class="line">    link.append(<span class="number">30</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.last?.value == <span class="number">30</span>, <span class="string">"tail 节点为 30"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testLinkedListAppend()</span><br></pre></td></tr></table></figure>
<h2 id="输出链表"><a href="#输出链表" class="headerlink" title="输出链表"></a>输出链表</h2><p>当我们学会插入节点之后，第一时间就行看看链表中的内容。目前如果只是简单的 print(link) 的话是不能打印出处链表的信息的，为了实现输出链表信息，做如下操作：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">LinkedList</span>: <span class="title">CustomStringConvertible</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">var</span> description: <span class="type">String</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> text = <span class="string">"["</span></span><br><span class="line">        <span class="keyword">var</span> node = head</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> node != <span class="literal">nil</span> &#123;</span><br><span class="line">            text += <span class="string">"\(node!.value)"</span></span><br><span class="line">            node = node!.next</span><br><span class="line">            <span class="keyword">if</span> node != <span class="literal">nil</span> &#123; text += <span class="string">" -&gt; "</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> text + <span class="string">"]"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ul>
<li>首先为 LinkedList 声明 extension，然后实现 CustomStringConvertible 协议，这个协议要求你实现 computed property description：String</li>
<li>所以在 extension 内部，声明可计算属性 description，类型为 String，并且该属性是只读属性</li>
<li>然后在内容通过对 linkedList 的遍历以及字符串拼接，返回需要输出的链表格式</li>
</ul>
<p>测试：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> link1 = <span class="type">LinkedList</span>()</span><br><span class="line">link1.append(<span class="number">1</span>)</span><br><span class="line">link1.append(<span class="number">2</span>)</span><br><span class="line">link1.append(<span class="number">3</span>)</span><br><span class="line">link1.append(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(link1) <span class="comment">// output: [1 -&gt; 2 -&gt; 3 -&gt; 4]</span></span><br></pre></td></tr></table></figure>
<p><strong>playground 自动显示</strong></p>
<p><img src="/2018/07/26/current/June/Data Structure/Data-Structure-一-Linked-List/description.png" alt=""></p>
<h2 id="查找节点"><a href="#查找节点" class="headerlink" title="查找节点"></a>查找节点</h2><p>根据输入链表中 node 的位置返回 node object</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">nodeAt</span><span class="params">(<span class="number">_</span> index: Int)</span></span> -&gt; <span class="type">Node</span>? &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> index &gt;= <span class="number">0</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> node = head</span><br><span class="line">        <span class="keyword">var</span> i = index</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">while</span> node != <span class="literal">nil</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span> &#123;<span class="keyword">return</span> node&#125;</span><br><span class="line">            i = i - <span class="number">1</span></span><br><span class="line">            node = node!.next</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>说明：</strong></p>
<ul>
<li>首先剔除 index 为负数的情况，返回 nil</li>
<li>接着通过 node ！= nil 来进行循环，然后通过 index 自减是否为零来进行判断</li>
</ul>
<p>测试：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testNodeAt</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> link = <span class="type">LinkedList</span>()</span><br><span class="line">    link.append(<span class="number">0</span>)</span><br><span class="line">    link.append(<span class="number">1</span>)</span><br><span class="line">    link.append(<span class="number">2</span>)</span><br><span class="line">    link.append(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">assert</span>(link.nodeAt(<span class="number">0</span>)?.value == <span class="number">0</span>, <span class="string">"node[0] = 0"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.nodeAt(<span class="number">1</span>)?.value == <span class="number">1</span>, <span class="string">"node[1] = 1"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.nodeAt(<span class="number">3</span>)?.value == <span class="number">3</span>, <span class="string">"node[3] = 3"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.nodeAt(<span class="number">8</span>) == <span class="literal">nil</span> , <span class="string">"找不到"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.nodeAt(-<span class="number">1</span>) == <span class="literal">nil</span> , <span class="string">"找不到"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testNodeAt()</span><br></pre></td></tr></table></figure>
<h2 id="删除所有节点"><a href="#删除所有节点" class="headerlink" title="删除所有节点"></a>删除所有节点</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">removeAll</span><span class="params">()</span></span> &#123;</span><br><span class="line">    head = <span class="literal">nil</span></span><br><span class="line">    tail = <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testRemoveAll</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> link = <span class="type">LinkedList</span>()</span><br><span class="line">    link.append(<span class="number">0</span>)</span><br><span class="line">    link.append(<span class="number">1</span>)</span><br><span class="line">    link.append(<span class="number">2</span>)</span><br><span class="line">    link.append(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    link.removeAll()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">assert</span>(link.isEmpty, <span class="string">"空"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.first == <span class="literal">nil</span>, <span class="string">"first"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.last == <span class="literal">nil</span>, <span class="string">"last"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.nodeAt(<span class="type">Int</span>(arc4random())) == <span class="literal">nil</span> , <span class="string">"anynoe"</span>)</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testRemoveAll()</span><br></pre></td></tr></table></figure>
<h2 id="删除指定节点"><a href="#删除指定节点" class="headerlink" title="删除指定节点"></a>删除指定节点</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">remove</span><span class="params">(<span class="number">_</span> node: Node)</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> prev = node.previous</span><br><span class="line">    <span class="keyword">let</span> next = node.next</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> prev = prev &#123;</span><br><span class="line">        prev.next = next</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//如果删除的是 first</span></span><br><span class="line">        head = next</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    next?.previous = prev</span><br><span class="line">    <span class="comment">//如果删除的是 last</span></span><br><span class="line">    <span class="keyword">if</span>  next == <span class="literal">nil</span> &#123;</span><br><span class="line">        tail = prev</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    node.previous = <span class="literal">nil</span></span><br><span class="line">    node.next = <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> node.value</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>测试：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">testRemove</span> <span class="params">()</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> link = <span class="type">LinkedList</span>()</span><br><span class="line">    link.append(<span class="number">0</span>)</span><br><span class="line">    link.append(<span class="number">1</span>)</span><br><span class="line">    link.append(<span class="number">2</span>)</span><br><span class="line">    link.append(<span class="number">3</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> value = link.remove(link.nodeAt(<span class="number">2</span>)!)</span><br><span class="line">    <span class="built_in">assert</span>(value == <span class="number">2</span>,<span class="string">"删除"</span>)</span><br><span class="line">    <span class="built_in">assert</span>(link.last?.value == <span class="number">3</span>,<span class="string">"删除"</span>)</span><br><span class="line">    link.remove(link.last!)</span><br><span class="line">    <span class="built_in">assert</span>(link.last?.value == <span class="number">1</span>, <span class="string">"删除最后一个node，最后一个node 变为 1"</span>)</span><br><span class="line">    link.remove(link.first!)</span><br><span class="line">    <span class="built_in">assert</span>(link.last?.value == <span class="number">1</span>, <span class="string">"删除第一个node，第一个node 变为 1"</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">testRemove()</span><br></pre></td></tr></table></figure>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="https://www.raywenderlich.com/144083/swift-algorithm-club-swift-linked-list-data-structure" target="_blank" rel="noopener">Swift Algorithm Club: Swift Linked List Data Structure</a></li>
</ol>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/26/current/June/Swift/Swift-一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/26/current/June/Swift/Swift-一/" itemprop="url">Swift (一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-26T22:58:18+08:00">
                2018-07-26
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Swift/" itemprop="url" rel="index">
                    <span itemprop="name">Swift</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Swift 访问控制</p>
<h2 id="private"><a href="#private" class="headerlink" title="private"></a>private</h2><h2 id="filePrivate"><a href="#filePrivate" class="headerlink" title="filePrivate"></a>filePrivate</h2><h2 id="internal"><a href="#internal" class="headerlink" title="internal"></a>internal</h2><h2 id="public"><a href="#public" class="headerlink" title="public"></a>public</h2><h2 id="open"><a href="#open" class="headerlink" title="open"></a>open</h2>
          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/25/current/June/iOS-离屏渲染/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/25/current/June/iOS-离屏渲染/" itemprop="url">iOS 离屏渲染</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-25T15:01:57+08:00">
                2018-07-25
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="什么是离屏渲染"><a href="#什么是离屏渲染" class="headerlink" title="什么是离屏渲染"></a>什么是离屏渲染</h2><p>iOS 的屏幕渲染是通过 GPU 来进行操作的，而在 GPU 渲染 ing 的时候，CPU 为 GPU 准备了渲染的资源，也就是开辟了一块待渲染的缓冲区，这样等当 GPU 渲染接下来的内容的时候直接从缓冲区内取就 OK 了，这便是离屏渲染。</p>
<p>当然与之对应的就是当前屏幕渲染，我们直接称之为屏幕渲染就好了。在进行 iOS 开发过程中，我们大部分操作的都是 UIKit 中的组件，这些组件正常的渲染都是屏幕渲染，只有在一些特殊的情况下才会使用离屏渲染。比如，在做动画的时候，通过使用屏幕渲染可能速度上会慢，所有就可以通过离屏渲染来加速，而且一旦你的缓存区可以重复利用，那么效率的提高是不是很爽（就如同 UITableViewCell 的重用机制）</p>
<h2 id="离屏渲染检测"><a href="#离屏渲染检测" class="headerlink" title="离屏渲染检测"></a>离屏渲染检测</h2><p>离屏渲染的检测目前可以通过 Xcode 来进行检测。Xcode 9.x 之后，这部分功能在 Xcode 中集成，之前的是在 Instruments 中的 Core Animation 工具中检测。<br>如图，真机调试，在 Xcode 的 Debug -&gt; View Debugging -&gt; Rendering -&gt; Color OffScreen-Render Yellow 选中<br><img src="/2018/07/25/current/June/iOS-离屏渲染/offScreen.png" alt=""></p>
<p>然后就可以在手机的 app 中看到开启了离屏渲染的视图，这样我们就可以在实际开发中找到哪些视图开启了离屏渲染<br><img src="/2018/07/25/current/June/iOS-离屏渲染/iPhone.png" alt=""></p>
<p>如果是 Simulator 的话，直接在 Simulator 的 Debug 菜单栏中选中 Color OffScreen-Render Yellow 也可以进行检测。</p>
<h2 id="哪些操作会引发离屏渲染"><a href="#哪些操作会引发离屏渲染" class="headerlink" title="哪些操作会引发离屏渲染"></a>哪些操作会引发离屏渲染</h2><h4 id="MaskView-的设置"><a href="#MaskView-的设置" class="headerlink" title="MaskView 的设置"></a>MaskView 的设置</h4><p>这是为 iOS 中的一些视图添加蒙版的属性， maskView 的属性是在 UIView 中的，iOS 8.0 + 开放的 API</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">UIView  *maskView = [[UIView alloc] initWithFrame:CGRectMake(<span class="number">0</span>, <span class="number">0</span>, <span class="number">80</span>, <span class="number">80</span>)];</span><br><span class="line">maskView.alpha = <span class="number">0.5</span>;</span><br><span class="line">maskView.backgroundColor = [UIColor blueColor];</span><br><span class="line">self.icon.maskView = maskView;</span><br></pre></td></tr></table></figure>
<h3 id="shouldRasterize-YES"><a href="#shouldRasterize-YES" class="headerlink" title="shouldRasterize = YES;"></a>shouldRasterize = YES;</h3><p>这个属性开启之后，也会引起离屏渲染</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.icon.layer.shouldRasterize = YES;</span><br></pre></td></tr></table></figure>
<p>shouldRasterize 这个属性是称之为 光栅化，如果开启次属性而且缓存区被重复利用，那么效率会有很大提升，这个属性也是可以通过 Xcode 的 Debug -&gt; View Debugging -&gt; Rendering -&gt; Hit Green and Missed Red<br><img src="/2018/07/25/current/June/iOS-离屏渲染/hitGreen.png" alt=""><br><img src="/2018/07/25/current/June/iOS-离屏渲染/hitGreeniPhone.png" alt=""></p>
<p>其他的可能会引起离屏渲染的，后面遇到了再进行添加！</p>
<h3 id="设置阴影"><a href="#设置阴影" class="headerlink" title="设置阴影"></a>设置阴影</h3><p>设置阴影会引起离屏渲染</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">self.icon.layer.shadowColor = [UIColor blueColor].CGColor;</span><br><span class="line">self.icon.layer.shadowOffset = CGSizeMake(<span class="number">5</span>, <span class="number">5</span>);</span><br><span class="line">self.icon.layer.shadowOpacity = <span class="number">1</span>;</span><br></pre></td></tr></table></figure>
<h3 id="设置圆角"><a href="#设置圆角" class="headerlink" title="设置圆角"></a>设置圆角</h3><p>这里需要注意了，如果是 UIImageView 设置圆角的话不会发生离屏渲染，但是如果是 UIButton 的话却会，而且 UIImageView iOS 9 之前应该会发生离屏渲染。所以，当我们知道一些调试技术的时候，就能知道苹果到底做了哪些事情了。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.mybtn.layer.cornerRadius = 40;</span><br><span class="line">self.mybtn.layer.masksToBounds = YES ;</span><br></pre></td></tr></table></figure></p>
<h2 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h2><ol>
<li><a href="http://www.cocoachina.com/ios/20170803/20120.html" target="_blank" rel="noopener">iOS 离屏渲染的研究</a></li>
<li><a href="http://foggry.com/blog/2015/05/06/chi-ping-xuan-ran-xue-xi-bi-ji/?utm_source=tuicool&amp;utm_medium=referral" target="_blank" rel="noopener">离屏渲染学习笔记- 王中周的技术博客</a></li>
<li><a href="">iOS离屏绘制的性能和机制分析</a></li>
<li><a href="https://objccn.io/issue-3-1/" target="_blank" rel="noopener">objc 绘制像素到屏幕上</a></li>
<li><a href="http://blog.inico.me/2013/05/18/designing-for-ios-graphics-performance#.W1ikKS-B3OQ" target="_blank" rel="noopener">iOS 图形处理和性能</a></li>
</ol>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/25/current/June/GitHub-一）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/25/current/June/GitHub-一）/" itemprop="url">GitHub （一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-25T14:01:09+08:00">
                2018-07-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/GitHub/" itemprop="url" rel="index">
                    <span itemprop="name">GitHub</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>这篇就解决一个问题: <strong>为什么在 GitHub 上提交了代码，然而上面的格子却没有变成绿色 ？</strong></p>
<p>我提交 Git 的时间应该还是算比较频繁的，但是发现一个问题，就是今天提交了，但是格子却没有变成绿色，先前一直没有注意这个问题</p>
<p><img src="/2018/07/25/current/June/GitHub-一）/Git.png" alt=""></p>
<p>其实我基本上每天都是有一些提交的，但是就是不显示绿色 …<br>但我还是发现了规律，如果我创建过 Git 仓库，那么那天就会变成绿色，我傻傻的以为，这个格子只有在创建了仓库之后才会变成绿色，😶</p>
<h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><p>原因就一句话：GitHub 上绑定的邮箱和 Git 提交的邮箱不一致，我之前本地因为工作的原因全局设置了 @163 的邮箱，但是 GitHub 上绑定的是 @gmail 邮箱。</p>
<h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><ol>
<li>修改 GitHub 上的邮箱，这个我没有实际修改过，一致就 OK 吧</li>
<li>修改本地邮箱，git config –global user.email ‘xxxx@gmail.com’(查看本地的直接用 git config user.email)</li>
</ol>
<p>修改完成后，提交一下，就可以看到绿色的格子了 … 有些事你还真得多想想！</p>
<h2 id="Git-命令指南"><a href="#Git-命令指南" class="headerlink" title="Git 命令指南"></a>Git 命令指南</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> maple @ iMac <span class="keyword">in</span> ~/Maple [14:30:37]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config user.email</span></span><br><span class="line">18576759510@163.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> maple @ iMac <span class="keyword">in</span> ~/Maple [14:30:45]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config --global user.email <span class="string">'huidragonaijy@gmail.com'</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> maple @ iMac <span class="keyword">in</span> ~/Maple [14:31:08]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> git config user.email</span></span><br><span class="line">huidragonaijy@gmail.com</span><br></pre></td></tr></table></figure>
<p>上面的命令：</p>
<hr>
<ol>
<li>查看本地 Git Email 地址；</li>
<li>修改本地 Git Email 地址；</li>
<li>再次查看是否修改成功</li>
</ol>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/23/current/June/RunLoop（一）/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/23/current/June/RunLoop（一）/" itemprop="url">RunLoop（一）</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-23T22:46:19+08:00">
                2018-07-23
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/RunLoop/" itemprop="url" rel="index">
                    <span itemprop="name">RunLoop</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="故事"><a href="#故事" class="headerlink" title="故事"></a>故事</h2><p>RunLoop ，运行时循环。</p>
<p>iOS App 启动之后，当前进程开启主线程之后，为了保证主线程一直在运行就在主线程中开启了 RunLoop。RunLoop 在运行过程中，如果有事件（比如 timer、Source、Observe）就会进行处理，如果没有事件就会在一种休眠状态。</p>
<p>在真正了解 RunLoop 之前，估计我就只能说出上面这一串解释说明了，如果再继续说的话，就应该是响应者链了。但是，经过最近一段时间学习发现 RunLoop 真是无处不在，只不过我们没有注意吧了。</p>
<p>比如：</p>
<ol>
<li>Timer 的运行与 RunLoop 有关，主要是 mode 方面；</li>
<li>GCD 的 dispatch_get_mainQueue 也与 RunLoop 有关系，毕竟都是在主线程中的事情；</li>
<li>ScrollView/TextView 的滑动业余 RunLoop 有关，主要是模式之间的切换；</li>
<li>App 的卡顿与 RunLoop 也有关，这个我倒是还不知道什么事情</li>
</ol>
<p>…</p>
<p>真心发现 RunLoop 是一个很大的模块，之前一直忽略了，这次抽时间好好的细致的了解一下 RunLoop 中的知识。</p>
<h2 id="RunLoop-API"><a href="#RunLoop-API" class="headerlink" title="RunLoop API"></a>RunLoop API</h2><p>RunLoop 的 API 有两套，一套是 OC 的，名字是 NSRunLoop； 另一套是 C 语言的 CFRunLoop。 后者是开源的</p>
<p>针对于 NSRunLoop，可以看一下文档介绍，大体意思为：<br>NSRunLoop 是编程接口，这套编程接口主要用来处理输源。<br>一个 NSRunLoop 对象负责处理键盘、鼠标、NSPort、NSConnection 以及 NSTimer 事件。你的应用开发中不能直接创建和管理 NSRunLoop。每一个 NSThread 对象，包括 mainThread 都包含了一个 NSRunLoop 对象，这个对象根据需要自动创建。如果你想要查看当前的 RunLoop 对象，可以通过 currentRunLoop 获取。</p>
<p>需要注意的是：<br>NSRunLoop 不是线程安全的，所以不要在多线程中使用 NSRunLoop。</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/23/current/June/我读过的博客/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/23/current/June/我读过的博客/" itemprop="url">我读过的博客</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-23T21:19:41+08:00">
                2018-07-23
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="iOS"><a href="#iOS" class="headerlink" title="iOS"></a>iOS</h2><ol>
<li><a href="http://tech.glowing.com/cn/" target="_blank" rel="noopener">Glow 技术团队博客</a>， 这是 Glow 团队的技术博客，其中印象比较深刻的有：runtime 的黑魔法，以及 ScrollView 的自动布局等其他用法，UITableView 图片加载的优化，还有一个是 KVO 的原理以及自己实现，这里的博客不仅仅有 iOS 的还有 Android 和 后台以及统计等方面的，非常适合阅读，我是花了一早上时间翻阅了所有的博客的，记忆深刻的是 Https 的过程</li>
<li><a href="https://www.objc.io/" target="_blank" rel="noopener"> objc.io 英文</a> &amp; <a href="https://www.objccn.io/" target="_blank" rel="noopener">objc.io 中文</a>，这里全部都是 iOS 的了，推荐直接看中文的吧，感觉每一篇都比较深刻，不是读一遍两遍可以体会到东西的，反正目前我还没有读完 … … 不知道是读不懂，还是怎么样，看着不错，但是读完了却没有学习到什么，可能是太深刻了</li>
<li><a href="https://nshipster.cn/" target="_blank" rel="noopener">NSHipster 中文</a>,这里的博客也是深度好文，不过觉得也是浅尝辄止吧，如果要学习东西的话，还是需要搜索其他的相关信息</li>
<li><a href="https://www.jianshu.com/u/815d10a4bdce" target="_blank" rel="noopener">落影</a> 博客里面有关于算法和音视频方面的知识，以及一些面试指导 还有 OpenGL</li>
<li><a href="https://www.jianshu.com/u/9c51a213b02e" target="_blank" rel="noopener">Joy__博客</a>,质量比较高，是通过趣直播发现的，然后看了下博客以及 GitHub，目前应该是就只与今日头条。博客中的内容主要是针对于 app 性能检测的，偏底层多一些</li>
</ol>
<h2 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h2><h2 id="Node-JS"><a href="#Node-JS" class="headerlink" title="Node JS"></a>Node JS</h2><h2 id="Android"><a href="#Android" class="headerlink" title="Android"></a>Android</h2><h2 id="C"><a href="#C" class="headerlink" title="C"></a>C</h2><h2 id="混合"><a href="#混合" class="headerlink" title="混合"></a>混合</h2>
          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/22/current/June/Node-JS-一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/22/current/June/Node-JS-一/" itemprop="url">Node JS (一)</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-22T12:40:14+08:00">
                2018-07-22
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/22/current/June/Hexo-四-添加动态背景效果canvas-nest/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Alice">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Hi, this is Alice Home">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2018/07/22/current/June/Hexo-四-添加动态背景效果canvas-nest/" itemprop="url">Hexo(四) 添加动态背景效果canvas-nest</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2018-07-22T10:33:16+08:00">
                2018-07-22
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Hexo/" itemprop="url" rel="index">
                    <span itemprop="name">Hexo</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>效果就如同你看到的背景一样，这种背景在一些博客中经常会看到，那么如何来进行设置呢？</p>
<p>非常简单，在 next theme 主题下，找到 <code>_config.yml</code> 文件，然后在文件末尾添加：</p>
<figure class="highlight yml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># --------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># background settings</span></span><br><span class="line"><span class="comment"># --------------------------------------------------------------</span></span><br><span class="line"><span class="comment"># add canvas-nest effect</span></span><br><span class="line"><span class="comment"># see detail from https://github.com/hustcc/canvas-nest.js</span></span><br><span class="line"><span class="attr">canvas_nest:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure>
<p>执行：hexo clean； hexo g； hexo s 就可以看到效果了！</p>

          
        
      
    </div>
    
    
    

    <div>
      
    </div>
    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/avatar.gif"
               alt="Alice" />
          <p class="site-author-name" itemprop="name">Alice</p>
           
              <p class="site-description motion-element" itemprop="description">The Loneliest Whale in the World</p>
          
        </div>
        <nav class="site-state motion-element">

          
            <div class="site-state-item site-state-posts">
              <a href="/archives">
                <span class="site-state-item-count">101</span>
                <span class="site-state-item-name">日志</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-categories">
              <a href="/categories/index.html">
                <span class="site-state-item-count">29</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            
            
            <div class="site-state-item site-state-tags">
              <a href="/tags/index.html">
                <span class="site-state-item-count">25</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2018</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Alice</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.2"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.2"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.2"></script>



  
    <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.2"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.2"></script>

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.2"></script>



  


  




	





  





  






  





  

  

  

  

  

  


</body>
</html>
